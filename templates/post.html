{% extends '_base.html' %} {% block title %}Post{% endblock %}Post{% block body %}
<section class="relative dark:bg-gray-900 flex flex-col">
	<div class="slide-top px-10">
		<div class="flex flex-row bg-white p-6 rounded-lg shadow-lg">
			<!-- EDIT FOR POST -->
			{% if (session) and post.account_id == session['user']['user_id']%}
			<div>
				<form action="{{url_for('community.edit_post', name=post.community_name, post_id=post.post_id)}}" method="GET">
					<button type="submit">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
						class="bi bi-pencil-square" viewBox="0 0 16 16">
						<path
							d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
						<path fill-rule="evenodd"
							d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
					</svg>
				</button>
				</form>
				<!-- DELETE POST -->
			<form action="{{url_for('community.delete_post', name=post.community_name, post_id=post.post_id)}}" method="POST">
				<button type="submit">
					<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash"
					viewBox="0 0 16 16">
				<path
					d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
				<path fill-rule="evenodd"
					d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
			</svg>
				</button>
				</form>
			</div>
			{% endif %}
			<!-- POST CONTENT (PREVIEW)-->
			<div class="ml-4">
				<span
					class="inline-block align-text-top text-base text-gray-900 dark:text-gray-800">g/{{post.community_name}}
					| Posted by u/{{post.author }} {{post.date_posted}}
				</span>
				<h2 class="flex text-2xl align-top font-bold mb-2 text-gray-800">{{post.title}}</h2>
				<p class="text-gray-700">{{post.content}}</p>
			</div>
		</div>
	</div>
</section>

<div class="antialiased mx-auto w-screen px-10">
	<h3 class="mb-4 text-lg font-semibold text-gray-900 dark:text-white">Comments</h3>
	<!-- CREATE A COMMENT -->
	<div
		class="block px-6 pt-6 pb-3 rounded-lg shadow-lg bg-white w-scren h-auto bg-white rounded-lg shadow dark:border dark:bg-gray-800 dark:border-gray-700">
		<form action="{{url_for('community.create_comment', name=community.community_name, post_id = post.post_id)}}"
			method="POST" autocomplete="off">
			<div class="form-group mb-6 flex flex-col">
				<input type="text"
					class="bg-gray-50 border border-gray-300 text-gray-900 sm:text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
					id="exampleInput7" name="description" placeholder="Tell us your thoughts...">
				<button type="submit"
					class="w-1/6 mt-3 justify-items-end text-white bg-blue-700 hover:bg-primary-700 focus:ring-4 focus:outline-none focus:ring-primary-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-violet-400 dark:text-gray-900 dark:hover:bg-violet-500 dark:focus:ring-primary-800">Post
					Comment</button>
			</div>
		</form>
	</div>

	<!--COMMENT SECTION-->
	{% for comment in comments %}
	<!-- TEST COMMENT -->
	<div class="space-y-4 pt-6">
		<div class="flex">
			<div
				class="flex-1 border rounded-lg px-4 py-2 sm:px-6 sm:py-4 leading-relaxed dark:text-white shadow-lg bg-white w-scren h-auto bg-white rounded-lg shadow dark:border dark:bg-gray-800 dark:border-gray-700">
				{% if (session) and comment.account_id == session['user']['user_id']%}
				<div>
					<!--EDIT/DELETE COMMENT HERE -->
					<form action="{{url_for('community.delete_comment', name=post.community_id, post_id=post.post_id, comment_id=comment.comment_id)}}" method="POST">
						<button type="submit">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash"
							viewBox="0 0 16 16">
							<path
								d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z" />
							<path fill-rule="evenodd"
								d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z" />
						</svg>
						</button>
					</form>
					<form action="{{url_for('community.edit_comment', name=post.community_name, post_id=comment.post_id, comment_id=comment.comment_id)}}">
						<button type="submit">
							<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
								class="bi bi-pencil-square" viewBox="0 0 16 16">
								<path
									d="M15.502 1.94a.5.5 0 0 1 0 .706L14.459 3.69l-2-2L13.502.646a.5.5 0 0 1 .707 0l1.293 1.293zm-1.75 2.456-2-2L4.939 9.21a.5.5 0 0 0-.121.196l-.805 2.414a.25.25 0 0 0 .316.316l2.414-.805a.5.5 0 0 0 .196-.12l6.813-6.814z" />
								<path fill-rule="evenodd"
									d="M1 13.5A1.5 1.5 0 0 0 2.5 15h11a1.5 1.5 0 0 0 1.5-1.5v-6a.5.5 0 0 0-1 0v6a.5.5 0 0 1-.5.5h-11a.5.5 0 0 1-.5-.5v-11a.5.5 0 0 1 .5-.5H9a.5.5 0 0 0 0-1H2.5A1.5 1.5 0 0 0 1 2.5v11z" />
							</svg>
						</button>
						</form>
				</div>
				{% endif %}
				<strong>u/{{comment.author}}</strong><span class="text-xs text-gray-400 dark:text-white">
					{{comment.date_posted}}</span>
				<p class="text-sm">
					{{comment.content}}
				</p>
			</div>
		</div>
	</div>
	{% endfor %}
</div>
{% endblock %}